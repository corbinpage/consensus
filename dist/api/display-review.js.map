{"version":3,"sources":["../../src/api/display-review.js"],"names":["config","db","id","load","req","callback","sourceCode","err","index","res","params","json","read","context","reviews","author","name","description","postNumber","postedAt","title","starsRating","body","readFile","resolve","data","status","send","source","toString","template","compile","html"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAGe;AAAA,MAAGA,MAAH,QAAGA,MAAH;AAAA,MAAWC,EAAX,QAAWA,EAAX;AAAA,SAAoB,wCAAS;;AAE1C;AACAC,QAAK,YAHqC;;AAK1C;;;AAGCC,QARyC,gBAQpCC,GARoC,EAQ/BF,EAR+B,EAQ3BG,QAR2B,EAQjB;AACvB,UAAIC,aAAaJ,EAAjB;AAAA,UACAK,MAAMD,aAAa,IAAb,GAAoB,WAD1B;AAEAD,eAASE,GAAT,EAAcD,UAAd;AACD,KAZyC;;;AAc1C;AACAE,SAf0C,wBAexBC,GAfwB,EAenB;AAAA,UAAfC,MAAe,SAAfA,MAAe;;AACrBD,UAAIE,IAAJ,CAAUD,MAAV;AACD,KAjByC;;;AAmB1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAE,QA3B0C,uBA2BrBH,GA3BqB,EA2BhB;AAAA,UAAnBH,UAAmB,SAAnBA,UAAmB;;AACxB;;AAEA,UAAIO,UAAU;AACZC,iBAAS,CACT;AACEC,kBAAQ;AACNC,kBAAM,WADA;AAENC,yBAAa,gBAFP;AAGNC,wBAAY,MAHN;AAINC,sBAAU;AAJJ,WADV;AAOEC,iBAAO,OAPT;AAQEC,uBAAa,GARf;AASEC,gBAAM;AATR,SADS,EAYT;AACEP,kBAAQ;AACNC,kBAAM,WADA;AAENC,yBAAa,gBAFP;AAGNC,wBAAY,MAHN;AAINC,sBAAU;AAJJ,WADV;AAOEC,iBAAO,OAPT;AAQEC,uBAAa,GARf;AASEC,gBAAM;AATR,SAZS;AADG,OAAd;;AA4BA,mBAAGC,QAAH,CAAY,eAAKC,OAAL,CAAa,6BAAb,CAAZ,EAAyD,UAASjB,GAAT,EAAckB,IAAd,EAAmB;AAC1E,YAAIlB,GAAJ,EAAS;AACPE,cAAIiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,WAArB;AACD,SAFD,MAEO;AACL,cAAMC,SAASH,KAAKI,QAAL,EAAf;AACA,cAAMC,WAAW,qBAAWC,OAAX,CAAmBH,MAAnB,CAAjB;AACA,cAAMI,OAAOF,SAASjB,OAAT,CAAb;;AAEAJ,cAAIkB,IAAJ,CAASK,IAAT;AACD;AACF,OAVD;AAWD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AArF0C,GAAT,CAApB;AAAA,C","file":"display-review.js","sourcesContent":["import resource from 'resource-router-middleware';\nimport path from 'path';\nimport fs from 'fs';\nimport Handlebars from 'handlebars';\n\n\nexport default ({ config, db }) => resource({\n\n  /** Property name to store preloaded entity on `request`. */\n  id : 'sourceCode',\n\n  /** For requests with an `id`, you can auto-load the entity.\n   *  Errors terminate the request, success sets `req[id] = data`.\n   */\n   load(req, id, callback) {\n    let sourceCode = id,\n    err = sourceCode ? null : 'Not found';\n    callback(err, sourceCode);\n  },\n\n  /** GET / - List all entities */\n  index({ params }, res) {\n    res.json( params ) \n  },\n\n  /** POST / - Create a new entity */\n  // create({ body }, res) {\n  //   body.id = db.models.password.length.toString(36);\n  //   db.models.password.push(body);\n  //   res.json(body);\n  // },\n\n  /** GET /:id - Return a given entity */\n  read({ sourceCode }, res) {\n    // res.json( sourceCode )  \n\n    let context = {\n      reviews: [\n      {\n        author: {\n          name: \"Bob Smith\",\n          description: \"My Description\",\n          postNumber: \"1000\",\n          postedAt: \"July 1st, 2015\",\n        },\n        title: \"Title\",\n        starsRating: \"3\",\n        body: \"This is the body.\"\n      },\n      {\n        author: {\n          name: \"Bob Smith\",\n          description: \"My Description\",\n          postNumber: \"1000\",\n          postedAt: \"July 1st, 2015\",\n        },\n        title: \"Title\",\n        starsRating: \"3\",\n        body: \"This is the body.\"\n      }\n      ]\n    };\n\n\n    fs.readFile(path.resolve('src/views/sourceReview.html'), function(err, data){\n      if (err) {\n        res.status(404).send('Not found');\n      } else {\n        const source = data.toString();\n        const template = Handlebars.compile(source);\n        const html = template(context);\n\n        res.send(html);\n      }\n    });\n  }\n\n  /** PUT /:id - Update a given entity */\n  // update({ password, body }, res) {\n  //   for (let key in body) {\n  //     if (key!=='id') {\n  //       password[key] = body[key];\n  //     }\n  //   }\n  //   res.sendStatus(204);\n  // },\n\n  /** DELETE /:id - Delete a given entity */\n  // delete({ password }, res) {\n  //   db.models.password.splice(db.models.password.indexOf(password), 1);\n  //   res.sendStatus(204);\n  // }\n});\n"]}